(function(){App.ns("Controls.CodeChallenges.Code_snippetsController",App.Control({init(e,t){new App.Controls.CodeSnippetListItemController(this.element)}}))}).call(this),function(){App.ns("Controls.CodeChallenges.DiscussController",App.Control({init(){this.renderViews(),new App.Controls.CodeChallengeInfoAreas(this.element),new App.Controls.CodeChallenges.SocialButtons(this.element.find(".train-social")),this.trackingName="CC-Discuss",this.track("Loaded"),App.activateHashEl()},track(e,t){null==t&&(t={}),t.language=App.data.activeLanguage,this._super(e,t)}}))}.call(this),function(){App.ns("Controls.CodeChallenges.EditorController",App.Control({init(){this.renderViews(),e(),App.DjaxRequest.register(),$("form")[0].reset(),this.outputPanel=new App.Controls.OutputPanel("#code_results",{showClose:!0});const t={change:e=>{if(e.isDirty()&&!this.languageBeingSet)return this.dirty=!0},stashGroup:App.data.id||"newkata"};if(this.cache=kizzy(t.stashGroup),this.codeSetup=new App.Controls.TextEditor("#code_setup",t),this.codeAnswer=new App.Controls.TextEditor("#code_answer",t),this.codeFixture=new App.Controls.TextEditor("#code_fixture",t),this.codeExampleFixture=new App.Controls.TextEditor("#code_example_fixture",t),this.codePackage=new App.Controls.TextEditor("#code_package",t),this.editors=[this.codeSetup,this.codeAnswer,this.codeFixture,this.codeExampleFixture,this.codePackage],this.markdownEditor=new App.Controls.MarkdownEditor("#description",{stashGroup:t.stashGroup}),this.cache.isEmpty()?this.setLanguage():App.confirmModal.show({titleHtml:"We found un-saved edits",messageHtml:"You have local edits that have not been saved. What would you like to do with them?",cancelHtml:"Discard",confirmHtml:"Keep",cancel:()=>(this.emptyStashes(),this.setLanguage()),confirm:()=>(this.dirty=!0,this.setLanguage())}),this.dirty=!1,App.data.id!==this.previousId&&(this.track("Loaded"),this.previousId=App.data.id),App.data.showIntro&&!this.options.reinit)return $.wait(1e3,()=>introJs().start())},events:{"window beforeunload"(e,t){if(this.dirty&&!App.ignoreConfirm)return t.preventDefault(),"You risk losing your progress!"},"window keydown"(e,t){return 8!==t.keyCode||$(t.target).is("input, textarea")?83===t.keyCode&&t.metaKey?(this.save(),this.track("Save Command Keyed"),t.preventDefault(),!1):void 0:(t.preventDefault(),!1)},"#validate_answer click"(e,t){return t.preventDefault(),this.validateCode(this.codeAnswer.getValue()),this.track("Validate Code Clicked",{answer:this.codeAnswer.getValue()})},"#code_answer texteditor.submit"(){return this.validateCode(this.codeAnswer.getValue())},"#code_fixture texteditor.submit"(){return this.validateCode(this.codeAnswer.getValue())},"#insert_example click"(e,t){return t.preventDefault(),this.insertExample($("#code_challenge_category").val()),this.track("Insert Example Clicked")},"#my_katas a click"(e,t){return t.preventDefault(),t.stopPropagation(),this.confirmIfDirty(()=>App.load({url:e.attr("href")}))},"#categories li click":e=>($("#code_challenge_category").val(e.data("value")),$("#categories li").removeClass("is-active"),e.addClass("is-active")),"#language_dd dd click"(e,t){return this.setLanguage(e.data("language"))},".lang-dd dd click"(e,t){return this.setVersion()},"#revert click"(e,t){return t.preventDefault(),this.emptyStashes(),App.load()},"#retire click":()=>App.confirmModal.show({titleHtml:"Are you sure you want to retire this kata?",messageHtml:"This cannot be undone via the UI",confirmHtml:"Retire it",confirm:()=>App.Api.post(App.route("retire"),function(e){if(e.success)return App.load()})}),"#save click"(e,t){return t.preventDefault(),this.save(),this.track("Save Clicked")},"#preview click"(e,t){t.preventDefault();const a=()=>App.load(App.route("preview",{language:App.data.language}));return this.track("Preview Clicked"),this.dirty?App.confirmModal.show({titleHtml:"You have un-saved changes",messageHtml:"You must save your changes before previewing. Do you want to continue?",confirmHtml:"Yes, I want to save changes and continue",confirm:()=>this.submit("save",a)}):a()},"#publish click"(e,t){return t.preventDefault(),this.publish(),this.track("Publish Clicked")},"#unpublish click"(e,t){return t.preventDefault(),this.submit("unpublish"),this.track("Un-publish Clicked")},"#delete click"(e,t){return t.preventDefault(),App.confirmModal.show({titleHtml:'<i class="icon-moon-warning" /> Are you sure you want to delete this code kata?',messageHtml:"You will not be able to undo this action",confirmHtml:"Yes, I want to delete this kata",confirm:()=>App.load({url:App.route("destroy"),type:"DELETE"})}),this.track("Delete Clicked")},"#code_answerLabel click"(){return $.wait(0,()=>(this.codeAnswer.refresh(),this.codeAnswer.resize()))},"#initial_setupLabel click"(){return $.wait(0,()=>(this.codeSetup.refresh(),this.codeSetup.resize()))},"#code_packageLabel click"(){return $.wait(0,()=>(this.codePackage.refresh(),this.codePackage.resize()))},"#code_fixtureLabel click"(){return $.wait(0,()=>(this.codeFixture.refresh(),this.codeFixture.resize()))},"#code_exampleFixtureLabel click"(){return $.wait(0,()=>(this.codeExampleFixture.refresh(),this.codeExampleFixture.resize()))},"input change"(){return this.dirty=!0},"textarea change"(){return this.dirty=!0},"select change"(){return this.dirty=!0},"#language_dd i.remove click"(e,t){t.stopPropagation(),t.preventDefault();const a=e.closest("dd").data("language"),s=e.closest("dd").text(),i=App.data.languages[a];return App.confirmModal.show({titleHtml:`<i class='icon-moon-warning' /> Are you sure you want to delete ${s}?`,messageHtml:"This action is destructive. All data related to this language will be deleted from the record.",confirmHtml:"Yes, I want to delete this language",confirm:()=>{const t=()=>{if($(e).closest("dd").removeClass("has-value"),App.data.languages[a]=null,App.data.language===a){for(let e of this.editors)e.setValue("");return this.setLanguage()}};return i&&i.id?$["delete"](App.route("remove_language",{language:a}),null,function(e){if(e.success)return t()}):t()}}),this.track("Remove Language Clicked",{language:a})},"#add_current_week_schedule click"(){return this.addToSchedule("current_week")},"#add_next_week_schedule click"(){return this.addToSchedule("next_week")},"#remove_current_week_schedules click"(){return this.removeSchedules("current_week")},"#remove_next_week_schedules click"(){return this.removeSchedules("next_week")},"#set_as_current_competition click":()=>$.post(App.route("make_current_competition"),null,e=>App.alerts.showResult(e.success,"Kata made the current week's competition")),"#runner_frame message.notifyResponse"(){if(this.running&&this.outputPanel.runner.response)return this.running=!1,this.handleResponse()}},getVersion:()=>$(".lang-dd:visible dd.is-active").data("version"),setVersion(e){return App.data.languages[App.data.language].default_version=e||this.getVersion()},setLanguage(e){null==e&&(e=App.data.language),App.data.language=e,$(".lang-dd").hide(),$(`#${e}_version`).show();let t=App.data.languages[e];t||(App.data.languages[e]=t={name:e}),this.setVersion();const a=function(a,s,i){if(s.save(),$.wait(()=>s.setMode(e,"answer"===a||"setup"===a)),s.setReadOnly(i),s.options.save=(()=>t[a]=s.getValue()),s.setValue(t[a],`${e}_${a}`,!0),App.data.languageErrors&&($("#languages .has-error").removeClass("has-error"),App.data.languageErrors[e]))for(let t of App.data.languageErrors[e]){const e=`#code_${t.name}`;App.ui.setFieldError(e,t.message,{ignoreMsg:!0}),$(`.tabs a[href='${e}']`).closest("dd").addClass("has-error")}},s=App.data.lockedFixtures.indexOf(e)>=0;return $(".icon-moon-lock")[s?"show":"hide"](),this.languageBeingSet=!0,a("setup",this.codeSetup),a("answer",this.codeAnswer),a("fixture",this.codeFixture,s),a("example_fixture",this.codeExampleFixture),a("package",this.codePackage),this.languageBeingSet=!1,this.markdownEditor.setStashId("description"),this.markdownEditor.setLanguage(e),App.replaceHistoryState(App.route("edit",{language:e}))},confirmUnload(e,t){return this.confirmIfDirty(e,t)},removeSchedules(e){const t=App.route("remove_from_schedules",{timeFrame:e});return App.confirmModal.show({titleHtml:"Confirm remove this kata from all schedules",messageHtml:`This kata will be removed from all of ${e.replace("_"," ")}'s schedules`,confirmHtml:"Sounds Good!",confirm:()=>$["delete"](t,{},e=>e.success?App.alerts.success("Kata successfully removed from all schedules"):App.alerts.fail(e.reason))})},addToSchedule(e){const t=$("#code_challenge_level").val(),a=App.route("add_to_schedule",{timeFrame:e,language:App.data.language,difficulty:t});return App.confirmModal.show({titleHtml:"Confirm add to training schedule",messageHtml:`This kata will be added to the ${e} ${App.data.language} schedule with a difficulty of ${t}.`,confirmHtml:"Sounds Good!",confirm:()=>$.post(a,{},e=>e.success?App.alerts.success("Kata successfully added to training schedule"):App.alerts.fail(e.reason))})},confirmIfDirty(e,t){return null==t&&(t=function(){}),this.dirty?App.data.published?App.confirmModal.show({titleHtml:'<i class="icon-moon-warning" /> You have unsaved changes!',messageHtml:"This kata has already been published. You must re-publish in order to keep the changes you made. What do you want to do?",cancelHtml:"I'll stay and re-publish my changes",confirmHtml:"Discard my changes and continue",cancel:t,confirm:()=>(this.emptyStashes(),"function"==typeof e?e():undefined)}):App.confirmModal.show({titleHtml:'<i class="icon-moon-warning" /> You have unsaved changes!',messageHtml:"Before we update the page what would you like to do?",altConfirmHtml:"Discard Changes",confirmHtml:"Save Changes",altConfirmClass:"alert",cancel:t,altConfirm:()=>{this.emptyStashes(),"function"==typeof e&&e()},confirm:()=>{for(let e of this.editors)e.save();return $("form").postForm({url:App.route("save")+".json",success(t){if(t.success)return e()}})}}):e()},save(){return App.data.published?this.publish():this.submit("save")},publish(){return this.submit("publish",null,e=>e?e.html?$("body").html(e.html):void 0:App.confirmModal.show({titleHtml:"<i class='icon-moon-warning' /> Publishing Timed Out!",messageHtml:"The server timed out while trying to publish your changes."})),App.confirmModal.show({hideActions:!0,titleHtml:"<div class='app_loading pam is-left'></div>Please wait while we publish",messageHtml:"We are validating your code and publishing your changes. This shouldn't take too long."})},submit(e,t,a){let s;for(s of this.editors)s.save();return this.markdownEditor.editor.exitFullScreen(),$("form.simple_form[action]").postForm({pjax:!a,djax:!!a,data:{languages:App.data.languages,language:App.data.language},url:App.route(e),scrollTo:!1,timeout:5e4,dataType:a?"json":undefined,success:()=>{this.emptyStashes(),"function"==typeof t&&t()},deferred:a})},emptyStashes(){return this.cache.clear()},validateCode(e){this.running=!0;const t={language:App.data.language,code:e,fixture:this.codeFixture.getValue(),setup:this.codePackage.getValue(),languageVersion:this.getVersion(),testFramework:App.data.testFrameworks[App.data.language]};return $("#code_results .alert-box").slideDown(),this.outputPanel.runner.run(t)},handleResponse(){},insertExample(e){const t=()=>$.getJSON(App.route("language_example",{language:App.data.language,category:e}),null,e=>{if(e.success)return this.codeAnswer.setValue(e.answer),this.codeFixture.setValue(e.fixture),this.codeSetup.setValue(e.setup)});return this.codeAnswer.getValue()||this.codeSetup.getValue()||this.codeFixture.getValue()?App.confirmModal.show({titleHtml:'<i class="icon-moon-warning" /> Possible loss of data!',messageHtml:"You are about to replace your current code with example code. Are you sure you want to discard your changes?",confirmHtml:"Yes, go ahead and replace with example code",confirm:t}):t()},track:(e,t={})=>(t.category=$("#code_challenge_category").val(),t.language=App.data.language,t.published=App.data.published,t.record_id=App.data.id,t.code_challenge_name=$("#code_challenge_name").val(),App.track(`CC-Editor: ${e}`,t))}));var e=()=>{for(let t in App.data.languages){var e=App.data.languages[t];["answer","fixture","setup","package","example_fixture"].forEach(t=>{e[t]=decodeURIComponent(e[t])})}}}.call(this),function(){App.ns("Controls.CodeChallenges.ListController",App.Control({init(){if(this.track("Loaded"),null!=App.currentUser&&App.currentUser.hideAds&&$("#carbonads-container").hide(),this.ranksRange=new App.Controls.RangeSelector("#ranks"),this.updatePointsEarned(),this.infiniteScroll=new App.Controls.InfiniteScroll("section.items-list",{loaded:()=>this.updatePointsEarned()}),App.locationParams().q)return $("#filters input").focus()},events:{".items-list .item-title a click"(e,t){return this.track("Item Title Click",{itemTitle:e.closest(".list-item").data("title")})},".items-list .icon-list a click"(e,t){const a=e.closest(".list-item").data("title");return this.track("Item Icon Click",{language:e.data("language"),itemTitle:a})},"#quick_links a click"(e,t){if($("#list_header").is(":visible"))return t.preventDefault(),$("#beta_filter").val(e.data("filter")),this.filter()},"#search_bar a click"(){return this.search()},"#search_bar input keypress"(e,t){if(13===t.keyCode)return t.preventDefault(),this.search()},".suggestions a.keyword-tag click"(e){return this.search(e.text())},"#app defaultlanguagechanged"(e,t,a){return!$("#list_header").is(":visible")&&App.routes.list?App.load(App.route("list",{language:a.value})):App.data.language?($("#language_filter").val(a.value),this.filter()):void 0},"#filters change"(){return this.filter()},"#filters .js-filter click"(e,t){return this.filter(),t.preventDefault()},"#reset_search click"(){return $("#search_bar input, #search select").val(""),this.ranksRange.clear()}},filterUrl(e){const t={q:e||$("#search_bar input").val(),r:this.ranksRange.values,tags:App.data.tags,xids:$("#ids_filter").val(),beta:$("#beta_filter").val(),category:$("#category_filter").val(),order_by:$("#order_by").val()};return Object.keys(t).forEach(function(e){if(!t[e]&&"q"!==e)return delete t[e]}),App.route("search",{language:$("#language_filter").val()},t)},search(e){return null==e&&(e=$("#search_bar input").val()),e=e.replace(/#/g,""),this.filter(e),this.track("Search",{search:e})},filter(e){return $("#filters button").addClass("is-disabled"),App.load(this.filterUrl(e))},track:(e,t={})=>(t.list_id=App.data.listId,App.track(`CC-List: ${e}`,t)),updatePointsEarned:()=>(null!=App.data.completedCodeChallengeIds&&App.data.completedCodeChallengeIds.each(e=>$(`#${e} .js-check`).removeClass("is-hidden")),$.wait(0,()=>$("#list_loading_msg").slideUp().fadeOut()))}))}.call(this),function(){App.ns("Controls.CodeChallenges.PendingController",App.Control({init(){}}))}.call(this),function(){App.ns("Controls.CodeChallenges.PlayController",App.Controls.Ide({init(){return this.languages={},this.play(),this.track("Loaded"),App.DjaxRequest.register()},events:{"window resize"(e,t){if($(window).width()<768){if("v"!==this.layout)return this.setLayout("v")}else if("h"!==this.layout)return this.setLayout("h")},"#language_dd dd click"(e,t){return App.replaceHistoryState(e.data("href")),App.data.activeLanguage=e.data("value"),this.isPlaying&&this._playLanguage(),this.track("Language Changed")},"#play_btn click"(){return this.play(),this.track("Play Clicked")},"#skip_btn click"(){return this.skip(),this.track("Skip Clicked")},"div#code texteditor.submit"(){return this.readyCode&&this.readyCode===this.editor.getValue()?this.submit():this.attempt()},"div#code texteditor.change"(){if(this.readyCode)return $.wait(0,()=>this.readyCode===this.editor.getValue()?($("#attempt_btn").hide(),$("#submit_btn").removeClass("is-hidden")):($("#submit_btn").addClass("is-hidden"),$("#attempt_btn").show(),this.attempting?void 0:this.editor.messages.hide()))},"#reset_btn:not(.is-disabled) click"(){return this.reset()},"#attempt_btn:not(.is-disabled) click"(){return this.attempt()},"#submit_btn:not(.is-disabled) click"(){return this.submit()},"#comments_btn click"(e,t){if(!t.ctrlKey&&!t.metaKey)return this.view_comments()},"#skip_btn click"(){return this.skip()},"#surrender_btn click"(){return this.surrender()},"#language_version dd.is-active click"(e){return this.language.activeVersion=e.data("version")}},filters:{active_label(){const e=this.language.languageVersions;if(!e)return;const t=e.find(e=>this.language.activeVersion===e.id);if(t&&t.label)return t.label;const a=e.last();return a&&a.label},version_class(e){return this.language.activeVersion===e.context.id?"is-active":e.context.supported?void 0:"is-disabled has-tip tip-right"},version_title(e){if(!e.context.supported)return"This version is not available"}},setLayout(e){switch(e){case"max":$("body").addClass("maximized").addClass("no-sidenav");break;case"min":$("body").removeClass("maximized").removeClass("no-sidenav");break;case"h":$("#h_layout").addClass("is-active").next().removeClass("is-active"),$("#description_area").removeClass("twelve").addClass("five is-full-height").find("ul.tabs-content").data("ignoreVerticalFill",!1).css({height:""}).find("> li").addClass("is-full-height"),$("#editors_area").removeClass("twelve pln h_layout").addClass("seven v_layout");break;case"v":$("#v_layout").addClass("is-active").prev().removeClass("is-active"),$("#description_area").removeClass("five is-full-height").addClass("twelve").find("ul.tabs-content").data("ignoreVerticalFill",!0).css({height:"auto"}).find("> li").removeClass("is-full-height"),$("#editors_area").removeClass("seven v_layout").addClass("twelve pln h_layout")}return this.layout=e,console.log("layout: ",e),$.wait(100,()=>$(window).resize())},validate(e={}){return this.showOutputWaiting(),this.fixture.messages.hide(),this.run(Object.merge({languageVersion:this.language.activeVersion,relayId:this.language.solutionId,ciphered:["setup"]},e))},attempt(){if(this.getCode())return $("#attempt_btn").addClass("is-disabled"),this.attempting=!0,this.validate({ciphered:["setup","fixture"],fixture:App.data.languageInfo.fixture}),this.track(`${App.data.published?"":"Preview "}Attempt Submitted`);this.editor.messages.fail(this.editor.emptyCodeMsg())},handleResponse(){App.debug("handleResponse()"),(this.fixture||this.editor).messages.hide();const e=this.outputPanel.runner,{attempting:t}=this;this.attempting=!1,this.editor.messages.hide();let a=!1,s=null;return e.response&&"execution success"===e.response.type&&(({completed:a}=e.response.result),App.Api.post(App.route("notify",{solutionId:this.language.solutionId}),{token:e.response.token,testFramework:e.request.testFramework,code:e.request.code,fixture:e.request.fixture,languageVersion:this.language.activeVersion},s=>{if(a&&s.success&&t&&(this.editor.markClean(),this.editor.messages.working(`<i class='icon-moon-circle-check is-green-text is-nudged-down'></i> ${App.consts.messages.success.sample()} You may take your time to refactor/comment your solution. Submit when ready.`),App.data.published))return this.readyCode=e.request.code,$("#submit_btn").removeClass("is-hidden"),$("#attempt_btn").hide(),this.track("Attempt Successful")},e=>{window.alert("There was a server issue while sending the request. Please try again."),Sentry.withScope(a=>{a.setTags({attempting:t}),a.setExtras({description:"Error while posting play notification",error:e,attempting:t,solutionId:this.language.solutionId}),Sentry.captureMessage("Failed to notify response")})}),({editor:s}=this),t||this.getFixture()&&""!==this.getFixture&&(s=this.fixture)),this.showResults(a,s)},submit(){if(this.readyCode&&this.readyCode===this.editor.getValue()){App.data.activeLanguage,this.language.play_result_id;return this.editor.messages.working("Submitting your final solution..."),App.Api.post({url:App.route("finalize",{solutionId:this.language.solutionId}),success:e=>e.success?$.wait(1500,()=>App.load(App.route("solutions",{language:App.data.activeLanguage}))):this.editor.messages.fail(e.debug||"There was an issue submitting your final solution")})}},skip(){return App.data.published?(this.track("Skipped"),$.post(App.route("skip",this.language),{language_name:App.data.activeLanguage},e=>App.load(e.route))):(this.track("Returning to editor"),App.load(App.route("editor",{language:App.data.activeLanguage})))},surrender(){return App.confirmModal.show({titleHtml:"Unlock Solutions",messageHtml:"This will cause you to forfeit your ability to earn honor/rank for this kata. Are you sure?",confirmHtml:"Yes, show me the solutions",confirm:()=>(this.track("Forfeited"),App.load({url:App.route("forfeit"),type:"POST"}))})},view_comments(){return this.track("Skipped/View Report"),$.post(App.route("skip",this.language),{language_name:App.data.activeLanguage},()=>App.load(App.route("comments")))},getSetupCode(){const e=this._getLanguage();return e&&e["package"]||""},play(){return this.isPlaying=!0,this._playLanguage()},_playLanguage(e){if(null==e&&(e=App.data.activeLanguage),$(`.js-${this.languageName}`).hide(),$(`.js-${e}`).show(),this.languages[e])return this._setLanguage(e);return $.post(App.route("session",{language:e}),{},t=>(this.started||(this.started=!0),this.languages[e]=t,this._setLanguage(e))).fail(()=>App.alerts.fail("The kata failed to load. Please try reloading the page."))},_getLanguage(e){return null==e&&(e=App.data.activeLanguage),this.languages[e]},_setLanguage(e){const t=this.languages[e];return t.views=t.views||0,t.views++,App.data.languageInfo=t,this.language=t,this.languageName=e,t.newPlay=!1,this.showPlay()},showPlay(){return $("#preplay").hide(),$("#play").show(),$(".language-tabs a").each((e,t)=>$(t).attr("href",null)),this.render(),this.playVisible=!0,$(window).resize()},render(){return this.renderViews(),this.configureEditors(),this.configureIde(),this.initMarkdown(),$.wait(100,()=>this.afterRender())},afterRender(){const e=!this.language.solutionId&&this.language.recently_attempted||this.language.views>1;this.editor.setValue(this.language.workingCode||this.language.setup,`${this.language.resultId}-${this.languageName}`,e),$.wait(()=>this.editor.setMode(App.data.activeLanguage,!0)),this.editor.focus();const t=this.language.workingFixture||this.language.exampleFixture||this.defaultFixtureText(this.languageName);return this.fixture.setValue(t,`${this.language.resultId}-${this.languageName}-fixture`,e),this.fixture.setMode(App.data.activeLanguage),$("#active_version_label").text($("#language_version dd.is-active").text())},configureEditors(){const e=CodeMirror.keyMap["default"]===CodeMirror.keyMap.macDefault?"Cmd":"Ctrl",t={};return t[`${e}-'`]=(()=>this.validate()),t[`${e}-Alt-Enter`]=(()=>this.validate()),t[`${e}-;`]=(()=>this.attempt()),t[`${e}-I`]=(()=>this.toggleTabs()),t[`${e}-Alt-I`]=(()=>this.toggleTabs()),t[`${e}-U`]=(()=>this.toggleFocusedEditor()),t[`${e}-Alt-U`]=(()=>this.toggleFocusedEditor()),this.editor=new App.Controls.CodeEditor("div#code",{mode:App.data.activeLanguage,stashGroup:App.data.id,extraKeys:t,commands:{save:()=>this.attempt()}}),this.fixture=new App.Controls.CodeEditor("div#fixture",{mode:App.data.activeLanguage,stashGroup:App.data.id,extraKeys:t,commands:{save:()=>this.validate()}}),this.editors=[this.editor,this.fixture]},initMarkdown(){return this.markdownDisplay=new App.Controls.MarkdownDisplay("#description",{language:App.data.activeLanguage}),this.markdownDisplay.setMarkdown(App.data.description),this.markdownDisplay.setLanguage(this.languageName)},track(e,t={}){return t.category=App.data.category,t.language=App.data.activeLanguage,t.strategy=App.data.strategy,t.challenge_name=App.data.challengeName,t.author_user_name=App.data.authorUserName,t.attempts=this.attempts,t.startedAt=App.data.startedAt,t.record_id=App.data.id,App.track(`CC-Play: ${e}`,t),App.debug(`CC-Play: ${e} tracked`)}}))}.call(this),function(){App.ns("Controls.CodeChallenges.ShowController",App.Control({init(){return this.trackingName="CC-Report",null!=App.currentUser&&App.currentUser.hideAds&&$("#carbonads-container").hide(),new App.Controls.CodeChallenges.SocialButtons(this.element.find(".train-social")),this.markdownDisplay=new App.Controls.MarkdownDisplay("#description",{language:App.data.activeLanguage}),this.markdownDisplay.setMarkdown(App.data.description),this.track("Loaded")},track(e,t={}){return t.category=App.data.category,t.language=App.data.activeLanguage,t.challenge_name=App.data.challengeName,t.author_user_name=App.data.authorUserName,t.record_id=App.data.id,t.view=App.data.isAuthorView?"author":"player",this._super(e,t)}}))}.call(this),function(){App.ns("Controls.CodeChallenges.SocialButtons",App.Control({init(){if(null==App.data.permissions||!1===App.data.permissions.save)return $(".js-edit-challenge").remove()},events:{".js-share-email click"(){const e=$(".js-train-email");return e.is(":visible")&&this.track("Social: Share Clicked",{social:"email"}),e.slideToggle(800)},"body .js-train-email button[type=cancel] click":(e,t)=>(t.preventDefault(),e.closest(".js-train-email").slideUp()),".js-share-twitter click"(e){return App.social.twitter.share(e.data("share-text")),this.track("Social: Share Clicked",{social:"twitter"})},".js-share-facebook click"(e){return App.social.facebook.share({title:e.data("share-title"),body:e.data("share-body")}),this.track("Social: Share Clicked",{social:"facebook"})}},track:(e,t={})=>(t.page=App.controller.trackingName,App.track(e,t))}))}.call(this),function(){App.ns("Controls.CodeChallenges.SolutionsController",App.Control({init(){return this.renderViews(),new App.Controls.CodeChallengeInfoAreas(this.element),new App.Controls.CodeChallenges.SocialButtons(this.element.find(".train-social")),new App.Controls.CompareSolutionsController(this.element),this.infiniteScroll=new App.Controls.InfiniteScroll("#solutions_list"),this.trackingName="CC-Solutions",this.track("Loaded")},events:{"#app infinitescrollcontent":()=>$("view:not(.js-rendered)").renderView(),".js-show-invalid click"(e){const t=$("<span>Loading...</span>");e.replaceWith(t);const a=new App.UriBuilder;return a.params.invalid_solutions="true",$.get(a.build(),{},function(e){return t.fadeOut(),$("#invalid_solutions").replaceWith(e)})},".js-show-dups click":e=>"Show Variations"===e.text()?(e.closest("li").find(".js-variations").slideDown(),e.text("Hide Variations")):(e.closest("li").find(".js-variations").slideUp(),e.text("Show Variations")),"#show_invalid_solutions click":e=>(e.closest("p").hide(),$("#invalid_solutions").slideDown()),".js-admin-action click":e=>$.post(e.data("href"),{},e=>alert(`Action ${e.success?"successfully queued":"failed"}`)),".js-delete-group click":e=>App.confirmModal.show({titleHtml:'<i class="icon-moon-warning" /> This action is permanent!',messageHtml:"This will delete this solution group from the list. Are you sure about this?",cancelHtml:"Cancel",confirmHtml:"Delete It!",confirm:()=>{const t=e.closest(".js-result-group");return $["delete"](App.route("solution_group",{groupId:t.attr("id")}),null,function(e){if(e.success)return t.fadeOut(800)})}}),".js-verify-group click"(e){const t=e.closest(".js-result-group");return $.post(App.route("verify",{groupId:t.attr("id")}),null,function(e){if(e.success)return alert(`Action ${e.success?"successfully queued":"failed"}`)})}},track(e,t={}){return t.language=App.data.activeLanguage,this._super(e,t)}}))}.call(this),function(){App.ns("Controls.CodeChallenges.TranslationsController",App.Control({init(e,t){new App.Controls.CodeSnippetListItemController(this.element)}}))}.call(this),function(){App.ns("Views.CodeChallenges.BetaFeedbackView",App.View({filters:{assess_rank_denied_msg:()=>App.data.isAuthor?'Authors cannot assess rank on their own kata. Set the "Estimated Rank" field in the kata editor instead.':App.data.completedKata?"You must have at least 100 honor before you can give your rank assessment.":"You must complete this kata before you can rank it"}}))}.call(this),function(){}.call(this);